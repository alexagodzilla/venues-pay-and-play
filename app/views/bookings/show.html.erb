<div class="container">
  <h1>Booking Details</h1>
  <% if @booking.end_date >= Date.today %>
    <h3 class="mt-3">Your booking is confirmed with <%= @booking.venue.name %></h3>
    <% else %>
    <h3 class="mt-3">Your booking is completed with <%= @booking.venue.name %></h3>
    <% end %>
    <% delta = distance_of_time_in_words(@booking.end_date,@booking.start_date).to_i  %>
    <ul>
      <li>Start date: <%= @booking.start_date.strftime("%d %B %Y") %> </li>
      <li>End date: <%= @booking.end_date.strftime("%d %B %Y") %></li>
      <% if delta <= 0 %>
        <li>Total cost: £<%= (@booking.venue.price_per_day).to_i * 1 %></li>
        <li>1 day</li>
      <% else %>
        <li>Total cost: £<%= (@booking.venue.price_per_day).to_i * distance_of_time_in_words(@booking.end_date,@booking.start_date).to_i%></li>
        <li><%= (distance_of_time_in_words(@booking.start_date,@booking.end_date)) %></li>
      <% end %>
    </ul>
    <% if @booking.end_date >= Date.today %>
    <button class="btn btn-info mt-2" type="submit">
    <%= link_to "Edit Booking", edit_booking_path(@booking), class: "text-white" %>
    </button>
    <button class="btn btn-danger mt-2" type="submit">
      <%= link_to "Delete booking", booking_path(@booking), data: { turbo_method: :delete,
      turbo_confirm: "Are you sure you want to delete your booking?" }, class: "text-white" %>
    </button>
    <% end %>
  <button class="btn btn-primary mt-2" type="submit">
    <%= link_to "Back to all venues", root_path, class: "text-white" %>
  </button>
  <% if @booking.end_date < Date.today %>
  <h1 id="review" class="mt-3">Leave a review</h1>
    <%= simple_form_for [@booking, @review] do |f| %>
      <%= f.input :comment %>
      <%= f.input :rating, collection: [1, 2, 3, 4, 5] %>
      <%= f.button :submit %>
    <% end %>
  <% end %>
</div>
